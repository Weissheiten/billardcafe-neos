version: "2"

services:
  neos5-main:
    image: "weissheiten-neos:upgradeBaseNeos3To5-N4"
    ports:
      - "80:80"
    links:
      - "neos5-mariadb"
    #  - "neos3-mail"
    volumes:
      - "./app/Configuration/Settings.yaml:/app/Configuration/Settings.yaml"
      - "./app/Data/Logs:/app/Data/Logs"
      - "./app/DistributionPackages:/app/DistributionPackages"

  neos5-mariadb:
    image: "mariadb:10.3.22"
    command: "--character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci"
    environment:
      MYSQL_ROOT_PASSWORD: "neos"
      MYSQL_DATABASE: "neos"
      MYSQL_USER: "neos"
      MYSQL_PASSWORD: "neos"
    ports:
      - "13306:3306"

  #neos3-mail:
  #  image: mailhog/mailhog
  #  ports:
  #    - 8025:8025
  #  environment:
  #    - VIRTUAL_HOST=mail.neos
  #    - VIRTUAL_PORT=8025
